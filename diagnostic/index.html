<!-- /diagnostic/index.html
     DomainElevation — Domain Diagnostic™ (one-screen intake)
     Matches the existing site style (same CSS tokens + layout).
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Domain Diagnostic — DomainElevation</title>
  <meta name="description" content="Run a Domain Diagnostic™ to evaluate naming alignment, structural risk, and long-horizon viability." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://domainelevation.com/diagnostic/" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="Domain Diagnostic™" />
<meta property="og:description" content="A structured evaluation of naming alignment, category clarity, and long-term domain risk." />
  <meta property="og:url" content="https://domainelevation.com/diagnostic/" />
  <meta property="og:image" content="https://domainelevation.com/diagnostic-og-image.PNG" />
  <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://domainelevation.com/diagnostic-og-image.PNG" />
  
<link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="/domainelevation-dot-32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/domainelevation-dot-192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/domainelevation-dot-180.png">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <meta name="theme-color" content="#ffffff">

  <style>
    :root{
      /* Same tokens as your homepage */
      --bg:#fbfaf7;
      --paper:#ffffff;
      --ink:#121212;

      --text-secondary:rgba(18,18,18,.78);
      --text-muted:rgba(18,18,18,.58);

      --border:rgba(18,18,18,.10);
      --border-strong:rgba(18,18,18,.16);

      --accent:#7a4cff;

      --max-width:960px;

      --font-serif: ui-serif, Georgia, "Times New Roman", Times, serif;
      --font-sans: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

      --radius:16px;
      --shadow: 0 18px 50px rgba(0,0,0,.06);
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html, body{ width:100%; overflow-x:hidden; }

    body{
      background:var(--bg);
      color:var(--ink);
      font-family:var(--font-sans);
      line-height:1.65;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      text-rendering:optimizeLegibility;
    }

    /* subtle grain (same as homepage) */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background: radial-gradient(transparent 1px, rgba(0,0,0,.02) 1px);
      background-size: 7px 7px;
      opacity:.25;
      mix-blend-mode:multiply;
    }

    a{
      color:inherit;
      text-decoration:none;
      border-bottom:1px solid transparent;
      transition: border-color .15s ease, color .15s ease, opacity .15s ease;
    }
    a:hover{ border-bottom-color:rgba(18,18,18,.40); }

    header{
      position:sticky;
      top:0;
      z-index:10;
      backdrop-filter: blur(8px);
      background: color-mix(in srgb, var(--bg) 88%, transparent);
      border-bottom:1px solid var(--border);
    }

    nav{
      max-width:var(--max-width);
      margin:0 auto;
      padding:18px 22px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:20px;
    }

    .brand{
      font-family:var(--font-serif);
      font-weight:500;
      letter-spacing:-0.01em;
      white-space:nowrap;
      display:flex;
      align-items:baseline;
      gap:.35rem;
    }
    .brand-mark{
      width:10px;
      height:10px;
      border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 18%, transparent);
      transform: translateY(-1px);
    }

    nav ul{
      list-style:none;
      display:flex;
      align-items:center;
      gap:22px;
      flex-wrap:wrap;
      justify-content:flex-end;
      min-width:0;
    }

    nav ul a{
      font-size:.95rem;
      letter-spacing:.01em;
      color:var(--text-muted);
      padding:8px 0;
    }
    nav ul a:hover{
      color:var(--ink);
      border-bottom-color:rgba(18,18,18,.40);
    }
    nav ul a.active{
      color: var(--ink);
      border-bottom-color: rgba(18,18,18,.45);
      font-weight: 500;
    }

    main{
      max-width:var(--max-width);
      margin:0 auto;
      padding:56px 22px 88px;
      position:relative;
      z-index:1;
    }

    .hero{
      background:var(--paper);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:42px 34px;
    }

    h1{
      font-family:var(--font-serif);
      font-size: clamp(2.05rem, 4.2vw, 3.15rem);
      font-weight: 420;
      letter-spacing:-0.015em;
      line-height:1.14;
      margin-bottom:18px;
      max-width: 26ch;
    }

    .lede{
      max-width: 78ch;
      color: var(--text-secondary);
      font-size: 1.02rem;
      margin-bottom: 18px;
    }

    .pill-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 12px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      font-size:.82rem;
      color: var(--text-muted);
      background: color-mix(in srgb, var(--paper) 80%, transparent);
    }
    .dot{
      width:7px; height:7px;
      border-radius:999px;
      background: color-mix(in srgb, var(--accent) 80%, #ffffff);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 16%, transparent);
    }

    section{ margin-top: 34px; }

    .section-card{
      background: var(--paper);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:30px 34px;
    }

    h2{
      font-size:.78rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: var(--text-muted);
      margin-bottom:14px;
    }

    p{
      max-width: 78ch;
      color: var(--text-secondary);
      font-size: 1rem;
      margin-bottom: 12px;
    }
    p:last-child{ margin-bottom:0; }

    .divider{
      height:1px;
      background: var(--border);
      margin: 22px 0;
    }

    /* Diagnostic form */
    .diag{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 14px;
      align-items:start;
    }

    .panel{
      border:1px solid var(--border);
      border-radius: 14px;
      padding:16px 16px 14px;
      background: linear-gradient(
        180deg,
        color-mix(in srgb, var(--paper) 92%, transparent),
        color-mix(in srgb, var(--paper) 78%, transparent)
      );
    }

    .panelTitle{
      font-size:.78rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: var(--text-muted);
      margin-bottom:12px;
    }

    .fieldRow{
      display:grid;
      gap:10px;
    }

    .input, .textarea, .select{
      width:100%;
      border:1px solid var(--border);
      background: color-mix(in srgb, var(--paper) 92%, transparent);
      color: var(--ink);
      border-radius: 12px;
      padding: 12px 12px;
      font: inherit;
      outline:none;
    }

    .textarea{ min-height: 110px; resize: vertical; }

    .input:focus, .textarea:focus, .select:focus{
      border-color: var(--border-strong);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 14%, transparent);
    }

    .qgroup{ margin-top: 14px; }
    .q{
      padding: 12px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: color-mix(in srgb, var(--paper) 94%, transparent);
      margin-bottom: 10px;
    }
    .q:last-child{ margin-bottom:0; }

    .qLabel{
      display:flex;
      gap:10px;
      align-items:baseline;
      justify-content:space-between;
      margin-bottom: 8px;
    }
    .qText{
      color: var(--text-secondary);
      font-size: .98rem;
      line-height: 1.5;
    }
    .qWeight{
      font-size: .75rem;
      letter-spacing:.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      white-space:nowrap;
      opacity:.9;
    }

    .choices{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 8px;
    }

    .choice{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 9px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: color-mix(in srgb, var(--paper) 86%, transparent);
      color: var(--text-secondary);
      font-size: .9rem;
      cursor:pointer;
      user-select:none;
    }
    .choice input{ accent-color: var(--accent); }
    .choice:hover{ border-color: var(--border-strong); }

    .actions{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: color-mix(in srgb, var(--paper) 90%, transparent);
      color: var(--ink);
      font-size: .88rem;
      letter-spacing: .10em;
      text-transform: uppercase;
      white-space:nowrap;
      cursor:pointer;
    }
    .btn:hover{ border-color: var(--border-strong); }
    .btn.primary{
      border-color: color-mix(in srgb, var(--accent) 36%, var(--border));
      background: color-mix(in srgb, var(--accent) 10%, transparent);
    }

    .fine{
      color: var(--text-muted);
      font-size: .92rem;
      line-height: 1.6;
    }

    /* Result states */
    .resultBox{
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px 16px 14px;
      background: color-mix(in srgb, var(--paper) 92%, transparent);
    }

    .resultK{
      font-size:.78rem;
      letter-spacing:.18em;
      text-transform:uppercase;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .resultState{
      font-family: var(--font-serif);
      font-size: 1.35rem;
      letter-spacing: -0.01em;
      margin-bottom: 8px;
      font-weight: 520;
    }

    .badgeLine{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.78rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--text-muted);
      margin-top: 10px;
    }
    .badgeDot{
      width:7px; height:7px; border-radius:999px;
      background: color-mix(in srgb, var(--accent) 80%, #ffffff);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 16%, transparent);
    }

    .hidden{ display:none !important; }

    /* Formal review form (Formspree) */
    .reviewForm{
      margin-top: 12px;
      border-top: 1px solid var(--border);
      padding-top: 12px;
    }

    .status{
      margin-top: 10px;
      color: var(--text-muted);
      font-size: .92rem;
      line-height:1.6;
    }

    footer{
      border-top:1px solid var(--border);
      padding:34px 22px;
      background: color-mix(in srgb, var(--bg) 88%, var(--paper));
      position:relative;
      z-index:1;
    }

    .footer-inner{
      max-width:var(--max-width);
      margin:0 auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:14px;
    }

    footer p{
      font-size:.92rem;
      color: var(--text-muted);
      margin:0;
      max-width: 78ch;
    }
    .footer-link{ font-size:.92rem; color: var(--text-secondary); }

    @media (max-width: 860px){
      .diag{ grid-template-columns: 1fr; }
    }

    @media (max-width: 760px){
      nav{ flex-direction:column; align-items:flex-start; gap:12px; }
      nav ul{ justify-content:flex-start; width:100%; gap:16px; }
      .hero{ padding:34px 18px; }
      .section-card{ padding:26px 18px; }
      main{ padding:44px 18px 72px; }
    }

    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0e0f12;
        --paper:#12141a;
        --ink:#f4f5f7;

        --text-secondary:rgba(244,245,247,.78);
        --text-muted:rgba(244,245,247,.56);

        --border:rgba(244,245,247,.10);
        --border-strong:rgba(244,245,247,.16);

        --shadow: 0 18px 50px rgba(0,0,0,.40);
      }

      body::before{
        opacity:.12;
        mix-blend-mode: normal;
        background: radial-gradient(transparent 1px, rgba(255,255,255,.03) 1px);
        background-size: 7px 7px;
      }

      a:hover{ border-bottom-color: rgba(244,245,247,.35); }
      nav ul a:hover{ border-bottom-color: rgba(244,245,247,.35); }

      nav ul a.active{ border-bottom-color: rgba(244,245,247,.45); }
    }
  </style>
</head>

<body>
  <header class="site-header">
    <nav class="nav" aria-label="Primary navigation">
      <a class="brand" href="/">
        <span class="brand-mark" aria-hidden="true"></span>
        <span>DomainElevation</span>
      </a>

      <ul class="nav-links">
        <li><a href="/">Home</a></li>
        <li><a href="/portfolios">Portfolios</a></li>
        <li><a href="/philosophy">Philosophy</a></li>
        <li><a href="/research">Research</a></li>
        <li><a href="/diagnostic" class="active">Diagnostic</a></li>
        <li><a href="/contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero" aria-label="Hero">
      <h1>Domain Diagnostic™</h1>
      <p class="lede">
  A second opinion on your domain before you commit. I review category fit, credibility, and long-horizon risk—so you can confidently <strong>keep it</strong>, <strong>rethink it</strong>, or <strong>pivot early</strong>.
</p>

<p class="lede">
  Not a valuation. Not automated. You’ll receive a concise written diagnostic by email within <strong>48–72 hours</strong>.
</p>

      <div class="pill-row" aria-label="Positioning badges">
        <span class="pill"><span class="dot"></span> Credibility + category fit</span>
<span class="pill"><span class="dot"></span> Long-horizon naming risk</span>
<span class="pill"><span class="dot"></span> Keep / rethink / pivot</span>
      </div>
    </section>

    <section class="section-card" aria-label="Diagnostic">
      <h2>Run a Diagnostic</h2>
      <p class="fine">
  This is not legal advice or a formal appraisal. It’s a directional naming review that returns one of three states —
  <strong>Aligned</strong>, <strong>Mixed</strong>, or <strong>Misaligned</strong> — based on category fit, credibility signal, and long-horizon clarity.
</p>

      <div class="divider" role="separator" aria-hidden="true"></div>

      <div class="diag" aria-label="Diagnostic grid">
        <!-- LEFT: questions -->
        <div class="panel" aria-label="Questions panel">
          <div class="panelTitle">Inputs</div>

          <div class="fieldRow">
            <input class="input" id="domain" name="domain" placeholder="Domain to evaluate (e.g., example.com)" autocomplete="off" />
            <input class="input" id="category" name="category" placeholder="Intended category (e.g., smart devices, identity, payments)" autocomplete="off" />
            <textarea class="textarea" id="intent" name="intent" placeholder="One sentence: what should this name represent long-term?"></textarea>
          </div>

          <div class="qgroup" aria-label="Questions">
            <!-- Scoring: 0 / 0.5 / 1 per question, weighted -->
            <div class="q" data-q="q1" data-w="3">
              <div class="qLabel">
                <div class="qText"><strong>Category clarity:</strong> the name anchors to a clear, defensible category.</div>
                <div class="qWeight">Weight 3</div>
              </div>
              <div class="choices">
                <label class="choice"><input type="radio" name="q1" value="0">No</label>
                <label class="choice"><input type="radio" name="q1" value="0.5">Somewhat</label>
                <label class="choice"><input type="radio" name="q1" value="1">Yes</label>
              </div>
            </div>

            <div class="q" data-q="q2" data-w="3">
              <div class="qLabel">
                <div class="qText"><strong>Semantic durability:</strong> the meaning will hold as the market evolves.</div>
                <div class="qWeight">Weight 3</div>
              </div>
              <div class="choices">
                <label class="choice"><input type="radio" name="q2" value="0">No</label>
                <label class="choice"><input type="radio" name="q2" value="0.5">Somewhat</label>
                <label class="choice"><input type="radio" name="q2" value="1">Yes</label>
              </div>
            </div>

            <div class="q" data-q="q3" data-w="2">
              <div class="qLabel">
                <div class="qText"><strong>Authority fit:</strong> the name can function as a long-term identity or interface.</div>
                <div class="qWeight">Weight 2</div>
              </div>
              <div class="choices">
                <label class="choice"><input type="radio" name="q3" value="0">No</label>
                <label class="choice"><input type="radio" name="q3" value="0.5">Somewhat</label>
                <label class="choice"><input type="radio" name="q3" value="1">Yes</label>
              </div>
            </div>

            <div class="q" data-q="q4" data-w="3">
              <div class="qLabel">
                <div class="qText"><strong>Collision risk:</strong> low chance of trademark / regulatory / semantic conflict.</div>
                <div class="qWeight">Weight 3</div>
              </div>
              <div class="choices">
                <label class="choice"><input type="radio" name="q4" value="0">No</label>
                <label class="choice"><input type="radio" name="q4" value="0.5">Unclear</label>
                <label class="choice"><input type="radio" name="q4" value="1">Yes</label>
              </div>
            </div>

            <div class="q" data-q="q5" data-w="2">
              <div class="qLabel">
                <div class="qText"><strong>Strategic optionality:</strong> the name preserves multiple credible futures.</div>
                <div class="qWeight">Weight 2</div>
              </div>
              <div class="choices">
                <label class="choice"><input type="radio" name="q5" value="0">No</label>
                <label class="choice"><input type="radio" name="q5" value="0.5">Somewhat</label>
                <label class="choice"><input type="radio" name="q5" value="1">Yes</label>
              </div>
            </div>

            <div class="actions" aria-label="Actions">
              <button class="btn primary" id="runBtn" type="button">Run diagnostic →</button>
              <button class="btn" id="resetBtn" type="button">Reset</button>
            </div>

            <p class="fine" style="margin-top:10px;">
              Results are directional. If you request a formal review, include decision authority, intended use, and timeline.
            </p>
          </div>
        </div>

        <!-- RIGHT: results + formal review -->
        <aside class="panel" aria-label="Results panel">
          <div class="panelTitle">Outcome</div>

          <div id="resultBox" class="resultBox">
            <div class="resultK">Result state</div>
            <div class="resultState" id="resultState">Not yet evaluated</div>
            <p class="fine" id="resultCopy">
  Add your domain + category, then run the diagnostic. You’ll get an outcome state here—then you can request a written founder-focused diagnostic by email.
</p>

            <div class="badgeLine" id="badgeLine">
              <span class="badgeDot" aria-hidden="true"></span>
              <span id="resultMeta">Domain Diagnostic™ — internal signal</span>
            </div>

            <!-- Formal review request (Formspree) -->
            <div class="reviewForm hidden" id="reviewFormWrap" aria-label="Formal review request">
              <div class="divider" role="separator" aria-hidden="true" style="margin:14px 0;"></div>
              <div class="resultK">Receive your written diagnostic</div>

              <!--
                Formspree:
                - Replace action URL with your Formspree endpoint
                - _next should point to your thank-you page
              -->
              <form id="formal-review-form"
                    action="https://formspree.io/f/xvzrglaw"
                    method="POST"
                    novalidate>

                <div class="fieldRow" style="margin-top:10px;">
                  <input class="input" name="name" required placeholder="Full name" autocomplete="name" />
                  <input class="input" name="company" placeholder="Company / org" autocomplete="organization" />
                  <input class="input" name="email" type="email" required placeholder="Email" autocomplete="email" />
                  <textarea class="textarea" name="message" required placeholder="Context: intended use, decision authority, timeline."></textarea>
                </div>

                <!-- Diagnostic payload (hidden) -->
                <input type="hidden" name="domain" id="h_domain" />
                <input type="hidden" name="category" id="h_category" />
                <input type="hidden" name="intent" id="h_intent" />
                <input type="hidden" name="diagnostic_state" id="h_state" />
                <input type="hidden" name="diagnostic_score" id="h_score" />
                <input type="hidden" name="diagnostic_details" id="h_details" />

                <input type="hidden" name="_subject" value="Domain Diagnostic — Formal Review Request" />
                <input type="hidden" name="_next" value="https://domainelevation.com/diagnostic/thanks.html" />
                <input type="text" name="_gotcha" style="display:none" />

                <select class="select" name="tier" required>
  <option value="" selected disabled>Select diagnostic type</option>
  <option value="Quick — $39">Quick — $39</option>
  <option value="Founder — $149">Founder — $149 (recommended)</option>
  <option value="Portfolio — from $499">Portfolio — from $499</option>
</select>   

                <button class="btn primary" type="submit" style="margin-top:12px; width:100%;">
                  Submit request →
                </button>

                <div class="status" id="status" aria-live="polite"></div>
              </form>

              <p class="fine" style="margin-top:10px;">
  You’ll receive a concise written diagnostic by email within 48–72 hours.
</p>
            </div>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      <p>Use the Domain Diagnostic™ to get a second opinion on your domain before you commit.</p>
      <a class="footer-link" href="/diagnostic">Run a diagnostic →</a>
    </div>
  </footer>

  <script>
    (function(){
      const runBtn = document.getElementById("runBtn");
      const resetBtn = document.getElementById("resetBtn");

      const domainEl = document.getElementById("domain");
      const categoryEl = document.getElementById("category");
      const intentEl = document.getElementById("intent");

      const resultStateEl = document.getElementById("resultState");
      const resultCopyEl = document.getElementById("resultCopy");

      const reviewWrap = document.getElementById("reviewFormWrap");

      // Hidden payload fields for Formspree
      const hDomain = document.getElementById("h_domain");
      const hCategory = document.getElementById("h_category");
      const hIntent = document.getElementById("h_intent");
      const hState = document.getElementById("h_state");
      const hScore = document.getElementById("h_score");
      const hDetails = document.getElementById("h_details");

      // Questions config (weights are stored on DOM too; this is for details)
      const Q = [
        { key: "q1", label: "Category clarity", weight: 3 },
        { key: "q2", label: "Semantic durability", weight: 3 },
        { key: "q3", label: "Authority fit", weight: 2 },
        { key: "q4", label: "Collision risk", weight: 3 },
        { key: "q5", label: "Strategic optionality", weight: 2 },
      ];

      // Thresholds:
      // - Aligned:   >= 78
      // - Mixed:     52–77.99
      // - Misaligned < 52
      function classify(score){
        if (score >= 78) return "Aligned";
        if (score >= 52) return "Mixed";
        return "Misaligned";
      }

      function getRadioVal(name){
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        return checked ? Number(checked.value) : null;
      }

      function run(){
        // Require some basic inputs (keeps it "institutional" + reduces junk)
        const domain = (domainEl.value || "").trim();
        const category = (categoryEl.value || "").trim();

        if (!domain || !category){
          resultStateEl.textContent = "Not yet evaluated";
          resultCopyEl.textContent = "Add the domain and intended category, then run the diagnostic.";
          reviewWrap.classList.add("hidden");
          return;
        }

        let weightedSum = 0;
        let weightedMax = 0;

        const details = [];

        for (const q of Q){
          const v = getRadioVal(q.key);
          weightedMax += q.weight * 1;
          // If unanswered, treat as 0 (quietly)
          const vv = (v === null ? 0 : v);
          weightedSum += vv * q.weight;

          details.push({
            key: q.key,
            label: q.label,
            weight: q.weight,
            value: vv
          });
        }

        // Convert to 0-100
        const score = weightedMax > 0 ? (weightedSum / weightedMax) * 100 : 0;
        const state = classify(score);

        const copyByState = {
  "Aligned": "Strong fit and credible signal. This looks like a name you can confidently build on. If you want the written diagnostic, request it below.",
  "Mixed": "Usable, but there’s tension (category clarity, credibility, or future narrowing). You can proceed, but it’s worth tightening now. Request the written diagnostic below.",
  "Misaligned": "High risk of confusion, drift, or credibility friction. If you keep it, expect rebrand pressure later—better to correct early. Request the written diagnostic below."
};

        resultStateEl.textContent = state;
        resultCopyEl.textContent = copyByState[state] || "";

        // Reveal formal review form (always available after a run, per your “formal review optional” framing)
        reviewWrap.classList.remove("hidden");

        // Populate hidden payload for Formspree
        hDomain.value = domain;
        hCategory.value = category;
        hIntent.value = (intentEl.value || "").trim();
        hState.value = state;
        hScore.value = score.toFixed(1);
        hDetails.value = JSON.stringify(details);
      }

      function reset(){
        domainEl.value = "";
        categoryEl.value = "";
        intentEl.value = "";
        document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);

        resultStateEl.textContent = "Not yet evaluated";
        resultCopyEl.textContent = "Complete the inputs and run the diagnostic. The scoring logic is internal and weighted.";
        reviewWrap.classList.add("hidden");

        // Clear hidden payload
        hDomain.value = "";
        hCategory.value = "";
        hIntent.value = "";
        hState.value = "";
        hScore.value = "";
        hDetails.value = "";
      }

      runBtn.addEventListener("click", run);
      resetBtn.addEventListener("click", reset);

      // Formspree: submit via fetch for clean UX (stays consistent with your other pages)
      const form = document.getElementById("formal-review-form");
      const status = document.getElementById("status");

      if (form){
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          if (status) status.textContent = "Sending…";

          try{
            const res = await fetch(form.action, {
              method: "POST",
              body: new FormData(form),
              headers: { "Accept": "application/json" }
            });

            if (!res.ok) throw new Error("Bad response");

            if (status) status.textContent = "Sent. Redirecting…";
            // Redirect to your thank-you page (matches _next)
            window.location.href = "https://domainelevation.com/diagnostic/thanks.html";
          }catch(err){
            if (status) status.textContent = "Couldn’t send right now. Please email hello@domainelevation.com.";
            console.error("Formspree submit failed:", err);
          }
        });
      }
    })();
  </script>
</body>
</html>
